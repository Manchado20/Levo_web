"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[51],{9602:(q,_,r)=>{r.d(_,{y:()=>C});var p=r(9490),g=r(8288),i=r(7716),f=r(8583);function u(e,m){1&e&&(i.ynx(0),i.TgZ(1,"div",1),i.Hsn(2),i.qZA(),i.TgZ(3,"div",2),i.Hsn(4,1),i.qZA(),i.BQk())}function h(e,m){1&e&&(i.TgZ(0,"div",4),i.Hsn(1,3),i.qZA()),2&e&&i.Q6J("@expandCollapse",void 0)}function Z(e,m){if(1&e&&(i.ynx(0),i.Hsn(1,2),i.YNc(2,h,2,1,"div",3),i.BQk()),2&e){const l=i.oxw();i.xp6(2),i.Q6J("ngIf",l.expanded)}}const A=[[["","fuseCardFront",""]],[["","fuseCardBack",""]],"*",[["","fuseCardExpansion",""]]],w=["[fuseCardFront]","[fuseCardBack]","*","[fuseCardExpansion]"];let C=(()=>{class e{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"fuse-card-expanded":this.expanded,"fuse-card-face-back":this.flippable&&"back"===this.face,"fuse-card-face-front":this.flippable&&"front"===this.face,"fuse-card-flippable":this.flippable}}ngOnChanges(l){"expanded"in l&&(this.expanded=(0,p.Ig)(l.expanded.currentValue)),"flippable"in l&&(this.flippable=(0,p.Ig)(l.flippable.currentValue))}}return e.\u0275fac=function(l){return new(l||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["fuse-card"]],hostVars:2,hostBindings:function(l,b){2&l&&i.Tol(b.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["fuseCard"],features:[i.TTD],ngContentSelectors:w,decls:2,vars:2,consts:[[4,"ngIf"],[1,"fuse-card-front"],[1,"fuse-card-back"],["class","fuse-card-expansion",4,"ngIf"],[1,"fuse-card-expansion"]],template:function(l,b){1&l&&(i.F$t(A),i.YNc(0,u,5,0,"ng-container",0),i.YNc(1,Z,3,1,"ng-container",0)),2&l&&(i.Q6J("ngIf",b.flippable),i.xp6(1),i.Q6J("ngIf",!b.flippable))},directives:[f.O5],styles:["fuse-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgba(0, 0, 0, .1), 0 1px 2px 0 rgba(0, 0, 0, .06);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}fuse-card.fuse-card-flippable .fuse-card-front,fuse-card.fuse-card-flippable .fuse-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden}fuse-card.fuse-card-flippable .fuse-card-front,fuse-card.fuse-card-flippable .fuse-card-back{--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgba(0, 0, 0, .1), 0 1px 2px 0 rgba(0, 0, 0, .06);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable .fuse-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}fuse-card.fuse-card-flippable .fuse-card-back{position:absolute;top:0;right:0;bottom:0;left:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:g.L}}),e})()},5935:(q,_,r)=>{r.d(_,{J:()=>f}),r(9602);var g=r(8583),i=r(7716);let f=(()=>{class u{}return u.\u0275fac=function(Z){return new(Z||u)},u.\u0275mod=i.oAB({type:u}),u.\u0275inj=i.cJS({imports:[[g.ez]]}),u})()},8051:(q,_,r)=>{r.r(_),r.d(_,{GameModule:()=>qe});var p=r(3423),g=r(1095),i=r(8295),f=r(6627),u=r(9983),h=r(2178),Z=r(7441),A=r(3017),w=r(5396),C=r(1436),e=r(7716);let m=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({}),s})();var l=r(4466);let b=(()=>{class s{constructor(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["game"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[p.lC],encapsulation:2,changeDetection:0}),s})();var x=r(6215),B=r(9765),L=r(739),k=r(6782),I=r(2238),G=r(205),N=r(5917),F=r(8307),M=r(8002),E=r(3190),Q=r(2340),U=r(705),J=r(1841);let y=(()=>{class s{constructor(t){this._httpClient=t,this._round=new x.X(null),this._categories=new x.X(null),this._course=new x.X(null),this._courses=new x.X(null)}get round$(){return this._round.asObservable()}get categories$(){return this._categories.asObservable()}get courses$(){return this._courses.asObservable()}get course$(){return this._course.asObservable()}getRound(){const t=U.l.getAccessTokenPayload(localStorage.accessToken);return this._httpClient.post(Q.N.apiURL+"/rounds",{area:t.area,user:t.user}).pipe((0,F.b)(n=>{this._round.next(n)}))}getCategories(){return this._httpClient.get("api/apps/academy/categories").pipe((0,F.b)(t=>{this._categories.next(t)}))}getCourses(){return this._httpClient.get("api/apps/academy/courses").pipe((0,F.b)(t=>{this._courses.next(t)}))}getCourseById(t){return this._httpClient.get("api/apps/academy/courses/course",{params:{id:t}}).pipe((0,M.U)(n=>(this._course.next(n),n)),(0,E.w)(n=>n?(0,N.of)(n):(0,G._)("Could not found course with id of "+t+"!")))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(J.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var D=r(303),Y=r(2458),v=r(8583);let O=(()=>{class s{constructor(){}transform(t,n,a){return Array.isArray(t)?t.map(c=>a.find(d=>d[n]===c)):a.find(c=>c[n]===t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275pipe=e.Yjl({name:"fuseFindByKey",type:s,pure:!1}),s})();function j(s,o){if(1&s&&(e.ynx(0),e.TgZ(1,"mat-option",14),e._uU(2),e.qZA(),e.BQk()),2&s){const t=o.$implicit;e.xp6(1),e.Q6J("value",t.slug),e.xp6(1),e.Oqu(t.title)}}const P=function(s,o,t,n){return{"text-blue-800 bg-blue-100 dark:text-blue-50 dark:bg-blue-500":s,"text-green-800 bg-green-100 dark:text-green-50 dark:bg-green-500":o,"text-pink-800 bg-pink-100 dark:text-pink-50 dark:bg-pink-500":t,"text-amber-800 bg-amber-100 dark:text-amber-50 dark:bg-amber-500":n}};function $(s,o){if(1&s&&(e.ynx(0),e.TgZ(1,"div",42),e._uU(2),e.qZA(),e.BQk()),2&s){const t=o.ngIf;e.xp6(1),e.Q6J("ngClass",e.l5B(2,P,"isc"===t.slug,"msc"===t.slug,"cloud"===t.slug,"firebase"===t.slug)),e.xp6(1),e.hij(" ",t.title," ")}}function z(s,o){1&s&&(e.ynx(0),e._UZ(1,"mat-icon",43),e.BQk()),2&s&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:badge-check")("matTooltip",""))}function H(s,o){1&s&&(e.TgZ(0,"span"),e._uU(1,"Con l\xedmite de tiempo"),e.qZA())}function K(s,o){1&s&&(e.TgZ(0,"span"),e._uU(1,"Sin l\xedmite de tiempo"),e.qZA())}function V(s,o){1&s&&(e.ynx(0),e.TgZ(1,"div",33),e._uU(2,"Never completed"),e.qZA(),e.BQk())}const X=function(){return{"=1":"palabra ",other:"palabras "}};function W(s,o){if(1&s&&(e.ynx(0),e.TgZ(1,"div",33),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.ynx(4),e._uU(5),e.ALo(6,"i18nPlural"),e.BQk(),e.TgZ(7,"span"),e._uU(8,"por ronda"),e.qZA(),e.qZA(),e.BQk()),2&s){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.wordsRound),e.xp6(2),e.hij(" ",e.xi3(6,2,t.wordsRound,e.DdM(5,X))," ")}}const ee=function(s){return[s]};function te(s,o){if(1&s&&(e.TgZ(0,"button",44),e.TgZ(1,"span",45),e.ynx(2),e.TgZ(3,"span"),e._uU(4,"Practicar"),e.qZA(),e.BQk(),e.ynx(5),e._UZ(6,"mat-icon",46),e.BQk(),e.qZA(),e.qZA()),2&s){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(2,ee,t.id)),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:arrow-sm-right")}}function se(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).showComingSoon(a.id)}),e.TgZ(1,"span",45),e.ynx(2),e.TgZ(3,"span"),e._uU(4,"Proximamente"),e.qZA(),e.BQk(),e.qZA(),e.qZA()}}function ne(s,o){if(1&s&&(e.ynx(0),e.TgZ(1,"div",23),e.TgZ(2,"div",24),e.TgZ(3,"div",25),e.YNc(4,$,3,7,"ng-container",26),e.ALo(5,"fuseFindByKey"),e.TgZ(6,"div",27),e.YNc(7,z,2,2,"ng-container",26),e.qZA(),e.qZA(),e.TgZ(8,"div",28),e._uU(9),e.qZA(),e.TgZ(10,"div",29),e._uU(11),e.qZA(),e._UZ(12,"div",30),e.TgZ(13,"div",31),e._UZ(14,"mat-icon",32),e.TgZ(15,"div",33),e.YNc(16,H,2,0,"span",26),e.YNc(17,K,2,0,"span",26),e.qZA(),e.qZA(),e.TgZ(18,"div",34),e._UZ(19,"mat-icon",32),e.YNc(20,V,3,0,"ng-container",26),e.YNc(21,W,9,6,"ng-container",26),e.qZA(),e.TgZ(22,"div",34),e._UZ(23,"mat-icon",32),e.TgZ(24,"div",33),e.TgZ(25,"span"),e._uU(26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",35),e.TgZ(28,"div",36),e._UZ(29,"div",37),e._UZ(30,"mat-progress-bar",38),e.qZA(),e.TgZ(31,"div",39),e.YNc(32,te,7,4,"button",40),e.YNc(33,se,5,0,"button",41),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&s){const t=o.$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("ngIf",e.Dn7(5,15,t.category,"slug",n.categories)),e.xp6(3),e.Q6J("ngIf",t.progress.completed>0),e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(t.description),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:clock"),e.xp6(2),e.Q6J("ngIf",t.timeLimit),e.xp6(1),e.Q6J("ngIf",!t.timeLimit),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:play"),e.xp6(1),e.Q6J("ngIf",0===t.progress.completed),e.xp6(1),e.Q6J("ngIf",t.progress.completed>0),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:puzzle"),e.xp6(3),e.Oqu(t.gameModes),e.xp6(4),e.Q6J("value",100),e.xp6(2),e.Q6J("ngIf",t.available),e.xp6(1),e.Q6J("ngIf",!t.available)}}function oe(s,o){if(1&s&&(e.ynx(0),e.TgZ(1,"div",22),e.YNc(2,ne,34,19,"ng-container",15),e.qZA(),e.BQk()),2&s){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.filteredCourses)("ngForTrackBy",t.trackByFn)}}function re(s,o){1&s&&(e.TgZ(0,"div",48),e._UZ(1,"mat-icon",49),e.TgZ(2,"div",50),e._uU(3,"No hay resultados"),e.qZA(),e.qZA()),2&s&&(e.xp6(1),e.Q6J("svgIcon","iconsmind:file_search"))}let ie=(()=>{class s{constructor(t,n){this.dialogRef=t,this.data=n}onNoClick(){this.dialogRef.close()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(I.so),e.Y36(I.WI))},s.\u0275cmp=e.Xpm({type:s,selectors:[["dialog-overview-example-dialog"]],decls:5,vars:1,consts:[[1,"flex","justify-center"],[1,"mat-dialog-title"],[2,"width","250px",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2,"Pr\xf3ximamente..."),e.qZA(),e.qZA(),e.TgZ(3,"div",0),e._UZ(4,"img",2),e.qZA()),2&t&&(e.xp6(4),e.Q6J("src","/assets/images/games/"+n.data.name+".png",e.LSH))},encapsulation:2}),s})(),ae=(()=>{class s{constructor(t,n,a,c,d){this._activatedRoute=t,this._changeDetectorRef=n,this._router=a,this._gameService=c,this.dialog=d,this.filters={categorySlug$:new x.X("all"),query$:new x.X(""),hideCompleted$:new x.X(!1)},this._unsubscribeAll=new B.xQ}ngOnInit(){this._gameService.categories$.pipe((0,k.R)(this._unsubscribeAll)).subscribe(t=>{this.categories=t,this._changeDetectorRef.markForCheck()}),this._gameService.courses$.pipe((0,k.R)(this._unsubscribeAll)).subscribe(t=>{this.courses=this.filteredCourses=t,this._changeDetectorRef.markForCheck()}),(0,L.aj)([this.filters.categorySlug$,this.filters.query$,this.filters.hideCompleted$]).subscribe(([t,n,a])=>{this.filteredCourses=this.courses,"all"!==t&&(this.filteredCourses=this.filteredCourses.filter(c=>c.category===t)),""!==n&&(this.filteredCourses=this.filteredCourses.filter(c=>c.title.toLowerCase().includes(n.toLowerCase())||c.description.toLowerCase().includes(n.toLowerCase())||c.category.toLowerCase().includes(n.toLowerCase()))),a&&(this.filteredCourses=this.filteredCourses.filter(c=>0===c.progress.completed))})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}filterByQuery(t){this.filters.query$.next(t)}filterByCategory(t){this.filters.categorySlug$.next(t.value)}toggleCompleted(t){this.filters.hideCompleted$.next(t.checked)}trackByFn(t,n){return n.id||t}showComingSoon(t){this.dialog.open(ie,{width:"500px",height:"400px",data:{name:t}})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(p.gz),e.Y36(e.sBO),e.Y36(p.F0),e.Y36(y),e.Y36(I.uw))},s.\u0275cmp=e.Xpm({type:s,selectors:[["academy-list"]],decls:26,vars:8,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"relative","flex-0","py-8","px-4","sm:p-16","overflow-hidden","bg-gray-800","dark"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],[1,"z-10","relative","flex","flex-col","items-center"],[1,"mt-1","text-4xl","sm:text-7xl","font-extrabold","tracking-tight","leading-tight","text-center"],[1,"max-w-2xl","mt-6","sm:text-2xl","text-center","tracking-tight","text-secondary"],[1,"flex","flex-auto","p-6","sm:p-10"],[1,"flex","flex-col","flex-auto","w-full","max-w-xs","sm:max-w-5xl","mx-auto"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","w-full","max-w-xs","sm:max-w-none"],[1,"fuse-mat-no-subscript","w-full","sm:w-100"],[3,"value","selectionChange"],[3,"value"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"fuse-mat-no-subscript","w-full","sm:w-72","mt-4","sm:mt-0","sm:ml-4",3,"floatLabel"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["placeholder","Buscar","matInput","",3,"input"],["query",""],[4,"ngIf","ngIfElse"],["noCourses",""],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","mt-8","sm:mt-10"],[1,"flex","flex-col","h-96","shadow","rounded-2xl","overflow-hidden","bg-card"],[1,"flex","flex-col","p-6"],[1,"flex","items-center","justify-between"],[4,"ngIf"],[1,"flex","items-center"],[1,"mt-4","text-lg","font-medium"],[1,"mt-0.5","line-clamp-2","text-secondary"],[1,"w-12","h-1","my-6","border-t-2"],[1,"flex","items-center","leading-5","text-md","text-secondary"],[1,"icon-size-5","text-hint",3,"svgIcon"],[1,"ml-1.5"],[1,"flex","items-center","mt-2","leading-5","text-md","text-secondary"],[1,"flex","flex-col","w-full","mt-auto"],[1,"relative","h-0.5"],[1,"z-10","absolute","inset-x-0","h-6","-mt-3"],[1,"h-0.5",3,"value"],[1,"px-6","py-4","text-right","bg-gray-50","dark:bg-transparent"],["mat-stroked-button","",3,"routerLink",4,"ngIf"],["mat-stroked-button","",3,"click",4,"ngIf"],[1,"py-0.5","px-3","rounded-full","text-sm","font-semibold",3,"ngClass"],[1,"icon-size-5","text-green-600",3,"svgIcon","matTooltip"],["mat-stroked-button","",3,"routerLink"],[1,"inline-flex","items-center"],[1,"ml-1.5","icon-size-5",3,"svgIcon"],["mat-stroked-button","",3,"click"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-20",3,"svgIcon"],[1,"mt-6","text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.O4$(),e.TgZ(2,"svg",2),e.TgZ(3,"g",3),e._UZ(4,"circle",4),e._UZ(5,"circle",5),e.qZA(),e.qZA(),e.kcU(),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e._uU(8," \xbfC\xf3mo deseas aprender? "),e.qZA(),e.TgZ(9,"div",8),e._uU(10," Elige un modo de aprendizaje o busca los disponibles para tu \xe1rea "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"div",11),e.TgZ(14,"mat-form-field",12),e.TgZ(15,"mat-select",13),e.NdJ("selectionChange",function(d){return n.filterByCategory(d)}),e.TgZ(16,"mat-option",14),e._uU(17,"Todas las \xe1reas"),e.qZA(),e.YNc(18,j,3,2,"ng-container",15),e.qZA(),e.qZA(),e.TgZ(19,"mat-form-field",16),e._UZ(20,"mat-icon",17),e.TgZ(21,"input",18,19),e.NdJ("input",function(){e.CHM(a);const d=e.MAs(22);return n.filterByQuery(d.value)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(23,oe,3,2,"ng-container",20),e.YNc(24,re,4,1,"ng-template",null,21,e.W1O),e.qZA(),e.qZA(),e.qZA()}if(2&t){const a=e.MAs(25);e.xp6(15),e.Q6J("value","all"),e.xp6(1),e.Q6J("value","all"),e.xp6(2),e.Q6J("ngForOf",n.categories)("ngForTrackBy",n.trackByFn),e.xp6(1),e.Q6J("floatLabel","always"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(3),e.Q6J("ngIf",n.filteredCourses.length)("ngIfElse",a)}},directives:[D.PQ,i.KE,Z.gD,Y.ey,v.sg,f.Hw,i.qo,u.Nt,v.O5,h.pW,v.mk,C.gM,g.lW,p.rH],pipes:[O,v.Gx],encapsulation:2,changeDetection:0}),s})();var ce=r(7574),S=r(3637),le=r(6561);function ue(s){const{subscriber:o,counter:t,period:n}=s;o.next(t),this.schedule({subscriber:o,counter:t+1,period:n},n)}class pe{constructor(){this.utterance=new SpeechSynthesisUtterance,this.utterance.lang="en-US",this.utterance.pitch=1,this.utterance.rate=.8,this.utterance.volume=1}speak(o){"speechSynthesis"in window&&(this.utterance.text=o,speechSynthesis.speak(this.utterance))}}class me{constructor(){this.sound=new Audio,this.sound.src="../../../assets/sounds/timer.wav"}play(){this.sound.load(),this.sound.play()}pause(){this.sound.pause()}destroy(){this.sound.pause(),this.sound=null}}class ge{constructor(){this.sound=new Audio,this.sound.src="../../../assets/sounds/flip.wav"}play(){this.sound.load(),this.sound.play()}pause(){this.sound.pause()}destroy(){this.sound.pause(),this.sound=null}}class fe{constructor(){this.sound=new Audio,this.sound.src="../../../assets/sounds/correct.wav"}play(){this.sound.load(),this.sound.play()}pause(){this.sound.pause()}destroy(){this.sound.pause(),this.sound=null}}class he{constructor(){this.sound=new Audio,this.sound.src="../../../assets/sounds/incorrect.wav"}play(){this.sound.load(),this.sound.play()}pause(){this.sound.pause()}destroy(){this.sound.pause(),this.sound=null}}var xe=r(9602),R=r(3679);const ve=["flashcard"],_e=["inputResponse"],Ze=["buttonResponse"];function be(s,o){1&s&&(e.TgZ(0,"div",36),e._UZ(1,"mat-icon",37),e.qZA()),2&s&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:badge-check"))}function ye(s,o){1&s&&(e.TgZ(0,"div",38),e._UZ(1,"mat-icon",37),e.qZA()),2&s&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:exclamation"))}function Ce(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"div"),e.TgZ(3,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().stopRound()}),e._uU(4,"Terminar"),e.qZA(),e.qZA(),e.TgZ(5,"div",6),e._uU(6),e.qZA(),e.TgZ(7,"div"),e.TgZ(8,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().respondCard(!0)}),e._uU(9,"Siguiente"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",8),e._UZ(11,"mat-progress-bar",9,10),e.qZA(),e.TgZ(13,"div",11),e.TgZ(14,"div",12),e.TgZ(15,"fuse-card",13,14),e.ynx(17,15),e.TgZ(18,"div",16),e.TgZ(19,"div",17),e._uU(20,"("),e.TgZ(21,"i"),e._uU(22),e.qZA(),e._uU(23),e.qZA(),e.TgZ(24,"div",18),e._uU(25),e.qZA(),e._UZ(26,"div",19),e.qZA(),e.BQk(),e.ynx(27,20),e.TgZ(28,"div",21),e.YNc(29,be,2,1,"div",22),e.YNc(30,ye,2,1,"div",23),e.qZA(),e.TgZ(31,"div",24),e.TgZ(32,"div",25),e._uU(33),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",26),e.TgZ(35,"div",27),e.TgZ(36,"div",28),e.TgZ(37,"mat-form-field",29),e.TgZ(38,"input",30,31),e.NdJ("keydown.enter",function(){return e.CHM(t),e.oxw().respondCard(!1)})("ngModelChange",function(a){return e.CHM(t),e.oxw().response=a}),e.qZA(),e.qZA(),e.TgZ(40,"div",32),e.TgZ(41,"button",33,34),e.NdJ("click",function(){return e.CHM(t),e.oxw().respondCard(!1)})("skipCard",function(){return e.CHM(t),e.oxw().respondCard(!0)}),e._UZ(43,"mat-icon",35),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("disabled",t.responded),e.xp6(3),e.hij(" ",t.currentItemNumber,"/10 "),e.xp6(2),e.Q6J("disabled",t.responded),e.xp6(3),e.Q6J("color",t.progressBarColor)("value",t.progressBarValue),e.xp6(4),e.Q6J("flippable",!0),e.xp6(7),e.Oqu(t.currentItem.type),e.xp6(1),e.AsE("). ","verb"==t.currentItem.type?"to":""," ",t.currentItem.word,""),e.xp6(2),e.hij(" ",t.currentItem.example," "),e.xp6(2),e.Q6J("ngClass",t.fuse-t.card-t.success),e.xp6(2),e.Q6J("ngIf",t.response.toLowerCase().trim()===t.currentItem.translation.toLowerCase()),e.xp6(1),e.Q6J("ngIf",t.response.toLowerCase().trim()!==t.currentItem.translation.toLowerCase()&&t.currentItem.translation),e.xp6(3),e.Oqu(t.currentItem.translation),e.xp6(5),e.Q6J("ngModel",t.response)("disabled",t.responded),e.xp6(3),e.Q6J("disabled",t.responded),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:paper-airplane")}}function Te(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"div",40),e.TgZ(2,"div",41),e.TgZ(3,"div",42),e._uU(4,"Resultados"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",43),e.TgZ(6,"div",41),e.TgZ(7,"div",44),e.TgZ(8,"div",45),e._UZ(9,"mat-icon",37),e.qZA(),e.TgZ(10,"div",46),e.TgZ(11,"div",47),e._uU(12,"Correctas"),e.qZA(),e.TgZ(13,"div",48),e._uU(14),e.qZA(),e._UZ(15,"mat-progress-bar",49),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",41),e.TgZ(17,"div",44),e.TgZ(18,"div",50),e._UZ(19,"mat-icon",37),e.qZA(),e.TgZ(20,"div",46),e.TgZ(21,"div",47),e._uU(22,"Incorrectas"),e.qZA(),e.TgZ(23,"div",48),e._uU(24),e.qZA(),e._UZ(25,"mat-progress-bar",51),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",41),e.TgZ(27,"div",44),e.TgZ(28,"div",52),e._UZ(29,"mat-icon",37),e.qZA(),e.TgZ(30,"div",46),e.TgZ(31,"div",47),e._uU(32,"Tiempo promedio de respuesta"),e.qZA(),e.TgZ(33,"div",48),e._uU(34),e.qZA(),e._UZ(35,"mat-progress-bar",51),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",53),e.TgZ(37,"button",54),e.NdJ("click",function(){return e.CHM(t),e.oxw().restartRound()}),e._UZ(38,"mat-icon",55),e.TgZ(39,"span",56),e._uU(40,"Practicar de nuevo"),e.qZA(),e.qZA(),e.TgZ(41,"button",57),e._UZ(42,"mat-icon",55),e.TgZ(43,"span",56),e._uU(44,"Ir a selecci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.xp6(9),e.Q6J("svgIcon","heroicons_outline:check-circle"),e.xp6(5),e.AsE("",t.correctResponses," palabras (",t.correctResponses/10*100,"%)"),e.xp6(1),e.Q6J("mode","determinate")("value",t.correctResponses/10*100),e.xp6(4),e.Q6J("svgIcon","heroicons_outline:exclamation"),e.xp6(5),e.AsE("",10-t.correctResponses," palabras (",(10-t.correctResponses)/10*100,"%)"),e.xp6(1),e.Q6J("color","warn")("mode","determinate")("value",(10-t.correctResponses)/10*100),e.xp6(4),e.Q6J("svgIcon","heroicons_outline:light-bulb"),e.xp6(5),e.hij("",t.averageResponseTime," segundos"),e.xp6(1),e.Q6J("color","accent")("mode","determinate")("value",t.averageResponseTime/t.progressBarTime*100),e.xp6(2),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:play"),e.xp6(3),e.Q6J("routerLink","/practicar")("color","warn"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:reply")}}let Ae=(()=>{class s{constructor(t,n,a,c,d){this._document=t,this._gameService=n,this._changeDetectorRef=a,this._router=c,this._httpClient=d,this.progressBarTime=15,this.progressBarValue=100,this.progressBarColor="primary",this.currentItem={},this.response="",this.roundStatus="playing",this.correctResponses=0,this.responseTimes=[],this.averageResponseTime="0",this._unsubscribeAll=new B.xQ}ngOnInit(){this.payload=U.l.getAccessTokenPayload(localStorage.accessToken),this.speechSynthesis=new pe,this.timerSound=new me,this.flipSound=new ge,this.correctSound=new fe,this.incorrectSound=new he,this.startRound()}ngAfterViewInit(){this.inputResponse.nativeElement.focus()}ngOnDestroy(){this.timerSound.destroy(),this.flipSound.destroy(),this.correctSound.destroy(),this.incorrectSound.destroy(),this._unsubscribeAll.next(),this._unsubscribeAll.complete()}nextCard(t){this.currentItem=t,this.responded=!1,this.progressBarColor="primary";const n=function(s=0,o=S.P){return(!(0,le.k)(s)||s<0)&&(s=0),(!o||"function"!=typeof o.schedule)&&(o=S.P),new ce.y(t=>(t.add(o.schedule(ue,s,{subscriber:t,counter:0,period:s})),t))}(10),a=100*this.progressBarTime;this.speech(this.currentItem.word);const c=n.subscribe(d=>{this.progressBarValue=100-100*d/a,this.progressBarValue<=30&&(this.progressBarColor="warn",25==this.progressBarValue&&this.timerSound.play()),(d===a||!0===this.responded)&&(c.unsubscribe(),this.currentItemNumber<10&&(this.currentItemNumber++,this.responseTimes.push(d/100),this.averageResponseTime=(this.responseTimes.reduce((T,Be)=>T+Be)/this.responseTimes.length).toFixed(2)),this.progressBarValue=100,this.progressBarColor="primary",!1===this.responded&&(this.responded=!0,this.buttonResponse.nativeElement.click())),this._changeDetectorRef.markForCheck()})}respondCard(t){if(this.timerSound.pause(),""===this.response.trim()&&!1===this.responded&&!t)return void this.inputResponse.nativeElement.focus();let n=!1,a=this.response.normalize("NFD").replace(/[\u0300-\u036f]/g,""),c=this.currentItem.translation.normalize("NFD").replace(/[\u0300-\u036f]/g,"");console.log(a.toLowerCase().trim(),"  this.response.toLowerCase().trim()"),console.log(c.toLowerCase().trim(),"  respuesta_usuario"),this.response.toLowerCase().trim()===this.currentItem.translation.toLowerCase()&&(this.correctResponses+=1,n=!0,console.log("correcto")),n?(this.correctSound.play(),console.log("correcto 2")):(this.incorrectSound.play(),console.log("incorrecto")),this._httpClient.post(Q.N.apiURL+"/response",{round:this.round._id,correct:n,time:this.progressBarValue<100?this.progressBarTime-this.progressBarTime*this.progressBarValue/100:0,word:this.currentItem.word,type:this.currentItem.type,translation:this.currentItem.translation}).toPromise().then(T=>{}).catch(T=>{console.log(T)}),this.inputResponse.nativeElement.disabled=!0,this.responded=!0,this.flashcard.face="back",this._changeDetectorRef.markForCheck(),setTimeout(()=>{10!==this.currentItemNumber?(this.currentItem.translation="",this._changeDetectorRef.markForCheck(),this.flashcard.face="front",this.response="",this.flipSound.play(),setTimeout(()=>{this.inputResponse.nativeElement.disabled=!1,this.inputResponse.nativeElement.focus(),this.nextCard(this.round.items[this.currentItemNumber])},200)):this.stopRound()},3e3)}startRound(){this.resetData(),this._gameService.round$.pipe((0,k.R)(this._unsubscribeAll)).subscribe(t=>{this.round=t,this.currentItemNumber=0,this.nextCard(this.round.items[this.currentItemNumber])})}stopRound(){"end"!==this.roundStatus&&(this.timerSound.pause(),this.roundStatus="end",this.responded=!0,this.currentItemNumber=10,this.inputResponse.nativeElement.disabled=!0,this._changeDetectorRef.markForCheck())}restartRound(){this.resetData(),setTimeout(()=>{this._router.navigate([this._router.url])},1e3)}resetData(){this.roundStatus="playing",this.correctResponses=0,this.responseTimes=[],this.round={},this.response="",this._changeDetectorRef.markForCheck()}speech(t){this.speechSynthesis.speak(t)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(v.K0),e.Y36(y),e.Y36(e.sBO),e.Y36(p.F0),e.Y36(J.eN))},s.\u0275cmp=e.Xpm({type:s,selectors:[["game-flashcards"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ve,5),e.Gf(_e,5),e.Gf(Ze,5,e.SBq)),2&t){let a;e.iGM(a=e.CRH())&&(n.flashcard=a.first),e.iGM(a=e.CRH())&&(n.inputResponse=a.first),e.iGM(a=e.CRH())&&(n.buttonResponse=a.first)}},decls:3,vars:2,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],["class","flex-auto p-8",4,"ngIf"],["class","m-4 p-10 shadow rounded-2xl bg-card",4,"ngIf"],[1,"flex-auto","p-8"],[1,"flex","justify-between"],["mat-flat-button","","color","warn",3,"disabled","click"],[1,"text-5xl","md:text-5xl","font-semibold","tracking-tight","leading-7","md:leading-snug","truncate","ng-star-inserted"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"pt-8"],["mode","determinate",3,"color","value"],["progressBar",""],[1,"py-12"],[1,"grid","grid-cols-12"],[1,"col-span-12","sm:col-start-2","sm:col-span-10","md:col-start-3","md:col-span-8","min-h-40",3,"flippable"],["flashcard",""],["fuseCardFront",""],[1,"flex","flex-col","px-8","py-6","pb-3"],[1,"text-lg","font-bold","sm:text-2xl","lg:text-3xl"],[1,"mt-2","sm:text-2xl","lg:text-2xl"],[1,"mt-3","-mx-3","self-end"],["fuseCardBack","",3,"ngClass"],[1,"flex","justify-end"],["class","flex flex-0 items-center justify-center w-8 h-8 m-2 rounded-full text-green-500 bg-green-100 dark:text-green-50 dark:bg-green-500",4,"ngIf"],["class","flex flex-0 items-center justify-center w-8 h-8 m-2 rounded-full text-red-600 bg-red-100 dark:text-red-50 dark:bg-red-600",4,"ngIf"],[1,"flex","flex-col","h-full","justify-center","items-center"],[1,"text-4xl","sm:text-4xl","lg:text-5xl","font-bold","pb-10"],[1,"grid","grid-cols-12","pb-5"],[1,"col-span-12","sm:col-start-2","sm:col-span-10","md:col-start-3","md:col-span-8"],[1,"flex","items-end"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","fuse-mat-bold","w-full"],["matInput","","type","text","autocomplete","off",1,"min-h-5","my-0","resize-none",2,"margin","11px 0 !important","padding","0 !important",3,"ngModel","disabled","keydown.enter","ngModelChange"],["inputResponse",""],[1,"flex","items-center","h-11","my-px","ml-4"],["mat-fab","",3,"disabled","click","skipCard"],["buttonResponse",""],[1,"transform","rotate-90",3,"svgIcon"],[1,"flex","flex-0","items-center","justify-center","w-8","h-8","m-2","rounded-full","text-green-500","bg-green-100","dark:text-green-50","dark:bg-green-500"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-0","items-center","justify-center","w-8","h-8","m-2","rounded-full","text-red-600","bg-red-100","dark:text-red-50","dark:bg-red-600"],[1,"m-4","p-10","shadow","rounded-2xl","bg-card"],[1,"flex","items-center","pb-2"],[1,"flex","flex-col"],[1,"mr-4","text-4xl","md:text-4xl","tracking-tight","leading-6","font-semibold"],[1,"my-8","space-y-8"],[1,"flex","items-center"],[1,"flex","items-center","justify-center","w-14","h-14","rounded","bg-indigo-100","text-indigo-800","dark:bg-indigo-600","dark:text-indigo-50"],[1,"flex-auto","ml-4","leading-none"],[1,"text-sm","font-medium","text-secondary"],[1,"mt-2","font-medium","text-2xl"],[1,"mt-3","rounded-full",3,"mode","value"],[1,"flex","items-center","justify-center","w-14","h-14","rounded","bg-red-100","text-red-800","dark:bg-red-600","dark:text-red-50"],[1,"mt-3","rounded-full",3,"color","mode","value"],[1,"flex","items-center","justify-center","w-14","h-14","rounded","bg-teal-100","text-teal-800","dark:bg-teal-600","dark:text-teal-50"],[1,"grid","grid-cols-2","gap-5","py-6"],["mat-flat-button","",1,"fuse-mat-button-rounded","col-span-2","sm:col-span-1",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["mat-flat-button","",1,"fuse-mat-button-rounded","col-span-2","sm:col-span-1",3,"routerLink","color"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ce,44,18,"div",1),e.YNc(2,Te,45,21,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf","playing"==n.roundStatus),e.xp6(1),e.Q6J("ngIf","end"==n.roundStatus))},directives:[v.O5,g.lW,h.pW,xe.y,v.mk,i.KE,u.Nt,R.Fj,R.JJ,R.On,f.Hw,p.rH],encapsulation:2,changeDetection:0}),s})();const Ie=[{path:"",component:b,resolve:{categories:(()=>{class s{constructor(t){this._gameService=t}resolve(t,n){return this._gameService.getCategories()}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(y))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},children:[{path:"",pathMatch:"full",component:ae,resolve:{courses:(()=>{class s{constructor(t){this._gameService=t}resolve(t,n){return this._gameService.getCourses()}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(y))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}},{path:"flashcards",component:Ae,runGuardsAndResolvers:"always",resolve:{round:(()=>{class s{constructor(t){this._gameService=t}resolve(t,n){return this._gameService.getRound()}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(y))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]}];var Fe=r(5939),Re=r(5935);let qe=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[p.Bz.forChild(Ie),g.ot,i.lN,f.Ps,u.c,h.Cv,Z.LD,A.SJ,w.rP,C.AV,m,l.m,Fe.Nh,Re.J]]}),s})()}}]);